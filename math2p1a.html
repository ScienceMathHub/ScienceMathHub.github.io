<!--
------------------------------------------------------------
 三角関数のグラフ

 HTML(JavaScript, canvas)

 key 0-9, qw, zxc, カーソル(+shift), Enter, space

 MathⅡ Ohtani 2022.1 - 2025.1
------------------------------------------------------------
-->
<!DOctxYPE html>
<html lang="ja">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<head>
  <meta charset="utf-8">
  <title>三角関数のグラフ</title>
</head>
<body>
<p id="Trigonometric"></p>
<div style='float:left;'>
<input type="button" id="butB1" value="1" onclick="inkey(65)">a
<input type="button" id="butB2" value="2" onclick="inkey(83)">s
<input type="button" id="butB3" value="3" onclick="inkey(68)">d<br><br>
<input type="button" id="but1"  value="1" onclick="inkey(49)">1
<input type="button" id="but1"  value="2" onclick="inkey(50)">2
<input type="button" id="but1"  value="3" onclick="inkey(51)">3<br>
<input type="button" id="but1"  value="4" onclick="inkey(52)">4
<input type="button" id="but1"  value="5" onclick="inkey(53)">5
<input type="button" id="but1"  value="6" onclick="inkey(54)">6<br>
<input type="button" id="but1"  value="7" onclick="inkey(55)">7
<input type="button" id="but1"  value="8" onclick="inkey(56)">8
<input type="button" id="but1"  value="9" onclick="inkey(57)">9<br>
<input type="button" id="but1"  value="10" onclick="inkey(48)">0<br>
<br>[キー操作]
<br>↑↓←→伸縮
<br> +Shift
<br>Enterリセット
<br>Spaceリセット
<br>0～9選択
<br>q,w線幅
<br>z,x,c縮拡

<script src="https://sciencemathhub.github.io/html/tomath.js"></script>
<script src="https://sciencemathhub.github.io/html/canlib.js"></script>
<script>
'use strict'
var B = new BASIC();

//----------------------------------------------------------
// Bank1 y = f(th)
//----------------------------------------------------------
var t11 = "y = sinθ";
function f11(th) { return Math.sin(th); }

var t12 = "y = sin(θ + π/2)";
function f12(th) { return Math.sin(th + Math.PI / 2); }

var t13 = "y = sin(θ + π)";
function f13(th) { return Math.sin(th + Math.PI); }

var t14 = "y = sin(θ + (3/2)π)";
function f14(th) { return Math.sin(th + 3/2 * Math.PI); }

var t15 = "y = cosθ";
function f15(th) { return Math.cos(th); }

var t16 = "y = tanθ";
function f16(th) { return Math.tan(th); }

var t17 = "y = sinθ / cosθ";
function f17(th) { return Math.sin(th) / Math.cos(th); }

var t18 = "y = sin^2θ + cos^2θ";
function f18(th)
{
  return Math.pow(Math.sin(th),2)+Math.pow(Math.cos(th),2);
}

var t19 = "y = tan^2θ + 1";
function f19(th) { return Math.pow(Math.tan(th), 2) + 1; }

var t10 = "y = 1 / cos^2θ";
function f10(th) { return 1 / Math.pow(Math.cos(th), 2); }

//----------------------------------------------------------
// Bank2 y = f(th)
//----------------------------------------------------------
var t21 = "y = sinθ";
function f21(th) { return Math.sin(th); }

var t22 = "y = 2sinθ";
function f22(th) { return 2 * Math.sin(th); }

var t23 = "y = sin2θ";
function f23(th) { return Math.sin(2 * th); }

var t24 = "y = sin 2(θ + π/4)";
function f24(th) { return Math.sin(2 * (th + 1/4 * Math.PI)); }

var t25 = "y = cos2θ";
function f25(th) { return Math.cos(2 * th); }

var t26 = "y = cos 2(θ + π/4) ";
function f26(th) { return Math.cos(2 * (th + 1/4 * Math.PI)); }

var t27 = "y = tanθ";
function f27(th) { return Math.tan(th); }

var t28 = "y = 2tanθ";
function f28(th) { return 2 * Math.tan(th); }

var t29 = "y = tan2θ";
function f29(th) { return Math.tan(2 * th); }

var t20 = "y = tan 2(θ + π/4)";
function f20(th) { return Math.tan(2 * (th + Math.PI / 4)); }

//----------------------------------------------------------
// Bank3 y = f(th)
//----------------------------------------------------------
var t31 = "y = sin8θ+sin10θ";
function f31(th) { return Math.sin(8*th) + Math.sin(10*th); }

var t32 = "y = sinθ+cosθ";
function f32(th) { return Math.sin(th) + Math.cos(th); }

var t33 = "y = sinθ+tanθ";
function f33(th) { return Math.sin(th) + Math.tan(th); }

var t34 = "y = cosθ+tanθ";
function f34(th) { return Math.cos(th) + Math.tan(th); }

var t35 = "y = θ + sinθ";
function f35(th) { return th + Math.sin(th); }

var t36 = "y = θsinθ";
function f36(th) { return th * Math.sin(th) + th; }

var t37 = "y = 2sinθcosθ";
function f37(th) { return 2 * Math.sin(th) * Math.cos(th); }

var t38 = "y = cos^2θ - sin^2θ";
function f38(th)
{
  return Math.pow(Math.cos(th), 2) -  Math.pow(Math.sin(th), 2);
}

var t39 = "y = 2tanθ / (1 - tan^2θ)";
function f39(th)
{ return 2 * Math.tan(th) / (1 -  Math.pow(Math.tan(th), 2)); }

var t30 = "y = 2sin8θ + sin10θ";
function f30(th)
{ return 2 * Math.sin(8 * th) + Math.sin(10 * th); }

//----------------------------------------------------------
// public variable
//----------------------------------------------------------
var CenX = 320, CenY = 200; // 中心座標

var ScaleX = 1; // X方向の大きさ
var ScaleY = 1; // Y方向の大きさ
var Select = 1; // 関数番号(0-9)
var Bank   = 1; // バンク番号(1-3)

//----------------------------------------------------------
// グラフ
//----------------------------------------------------------
function graph(c, n, m, func)
{
  var w, h, x, y, x0, y0, s;

  n = (n + 0.1) * Math.PI / 2;
  m = (m + 0.5);
  w = n / ScaleX;
  h = m / ScaleY;
  B.WINDOW(-w, h, w, -h);

  s  = Math.PI / 60;
  x0 = y0 = 1000;
  for (x = -w; x <= w; x += s)
  {
    y = func(x);
    if (Math.abs(y0 - y) > 5) { x0 = x; y0 = y; }
    B.LINE(x0, y0, x, y, c);
    x0 = x;
    y0 = y;
  }
}

//----------------------------------------------------------
// 目盛り
//----------------------------------------------------------
function scale(c, n, m, s)
{
  var t, w, h, x, y, k, str;

  w = (n + 0.1) * Math.PI/2;
  h = (m + 0.5);
  w = w / ScaleX;
  h = h / ScaleY;
  B.WINDOW(-w, h, w, -h);
  B.COLOR(c);

  x = s * w / 320;
  for (y = 1; y <= m; y++)
  {
    B.LOCATEp(x,  y); B.TAB(-4.7, 0.47-1); B.PRINT(" " + y);
    B.LOCATEp(x, -y); B.TAB(-4.7, 0.47-1); B.PRINT("-" + y);
    B.LINE(-x,  y, x,  y, c);
    B.LINE(-x, -y, x, -y, c);
  }
  B.LINE(-w, 0, w,  0, c);

  B.LINE( 0, h, 0, -h, c);
  k = s * h / 180;
  for (t = 1, x = Math.PI/2; x <= w; x += Math.PI/2, t++)
  {
    y = k * 3.0;
    if      ((t % 4) == 0)
    {
      y = k * 3.0;
      str = t / 2 + "π";
      B.LOCATEp(-x, -y); B.TAB(-2.3, 0.2); B.PRINT("-" + str);
      B.LOCATEp( x, -y); B.TAB(-2.3, 0.2); B.PRINT(" " + str);
    }
    else if ((t % 2) == 0)
    {
      if (t == 2)
      {
        B.LOCATEp(-x, -y); B.TAB(-1.8, 0.2); B.PRINT("-" + "π");
        B.LOCATEp( x, -y); B.TAB(-1.8, 0.2); B.PRINT(" " + "π");
      }
      else
      {
        str = t / 2 + "π";
        B.LOCATEp(-x, -y); B.TAB(-2.3, 0.2); B.PRINT("-" + str);
        B.LOCATEp( x, -y); B.TAB(-2.3, 0.2); B.PRINT(" " + str);
      }
      y = k * 1.5;
    }
    else
    {
      y = k;
    }
    B.LINE( x, -y,  x, y, c);
    B.LINE(-x, -y, -x, y, c);
  }
}

//----------------------------------------------------------
// select(0～9)
//----------------------------------------------------------
function selectof(k)
{
  var func  =
  [
    [f10, f11, f12, f13, f14, f15, f16, f17, f18, f19],
    [f20, f21, f22, f23, f24, f25, f26, f27, f28, f29],
    [f30, f31, f32, f33, f34, f35, f36, f37, f38, f39]
  ];
  var title =
  [
    [t10, t11, t12, t13, t14, t15, t16, t17, t18, t19],
    [t20, t21, t22, t23, t24, t25, t26, t27, t28, t29],
    [t30, t31, t32, t33, t34, t35, t36, t27, t38, t39]
  ];
  var n, m, i, str;

  if (!(0 <= k && k <= 9)) return;

  B.CLS('#000');
  B.FONT(1, 0);

  i = Bank - 1;
  Select = k;
  n =  5;
  m =  4;
  scale('#ff0', n, m, 10);

  B.COLOR('#fff');
  B.LOCATE(1, 0);
  str = (Select == 0)? "10" : "0" + Select;
  B.PRINT ("[" + Bank + "-" + str + "]  ");
  B.PRINTe(title[i][k]);

  graph('#fff', n, m, func[i][k]);
}

//----------------------------------------------------------
// Input key
//----------------------------------------------------------
function blur()
{
  document.getElementById('butB1').blur();
  document.getElementById('butB2').blur();
  document.getElementById('butB3').blur();
  document.getElementById('but1').blur();
  document.getElementById('but2').blur();
  document.getElementById('but3').blur();
  document.getElementById('but4').blur();
  document.getElementById('but5').blur();
  document.getElementById('but6').blur();
  document.getElementById('but7').blur();
  document.getElementById('but8').blur();
  document.getElementById('but9').blur();
  document.getElementById('but0').blur();
  document.getElementById('butR').blur();
}

function keyon(t)
{
  if (Key[ 16]) { t = t * t * t * t; } // SHIFT
  if (Key[ 38]) //↑
  {
    ScaleY *= t; if (ScaleY > 2    ) ScaleY = 2    ; 
    ScaleX *= t; if (ScaleX > 2    ) ScaleX = 2    ;
  }
  if (Key[ 40]) //↓
  {
    ScaleY /= t; if (ScaleY < 1    ) ScaleY = 1    ;
    ScaleX /= t; if (ScaleX < 1    ) ScaleX = 1    ;
  } 
  if (Key[ 39]) //→
  {
    ScaleX *= t; if (ScaleX > 2    ) ScaleX = 2    ;
  } 
  if (Key[ 37]) //←
  {
    ScaleX /= t; if (ScaleX < 0.197) ScaleX = 0.197;
  }
}

function inkey(key)
{
  switch (key)
  {
    case  13: ScaleX = ScaleY = 1  ; break; // Enter
    case  32:          ScaleY = 1  ; break; // Space
    case  81: B.lineWidth( 0.5)    ; break; // 'Q'
    case  87: B.lineWidth( 2  )    ; break; // 'W'
    case  90: B.zooming  (-1  )    ; break; // 'Z'
    case  88: B.zooming  ( 1  )    ; break; // 'X'
    case  67: B.zooming  ( 0  )    ; break; // 'C'
    case  65: Bank = 1             ; break; // 'A'
    case  83: Bank = 2             ; break; // 'S'
    case  68: Bank = 3             ; break; // 'D'
    default: selectof(key - 48);
  }
  blur();
  window.requestAnimationFrame(main);
}
document.body.addEventListener('keydown', event =>
{
  var key = event.keyCode;

  if (37 <= key && 40 <= key) event.preventDefault();
  inkey(key);
});

//----------------------------------------------------------------------
// Key status
//----------------------------------------------------------------------
var Key = new Array(256);
for (var i = 0; i < 256; i++) Key[i] = 0;
window.onkeydown = function(event) { Key[event.keyCode] = 1; }
window.onkeyup   = function(event) { Key[event.keyCode] = 0; }

//----------------------------------------------------------
// main
//----------------------------------------------------------
function main()
{
  selectof(Select);
  keyon(1.02);
  window.requestAnimationFrame(main);
}

main();

//----------------------------------------------------------
</script>
</body>
</html>
